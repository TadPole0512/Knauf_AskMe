```md
# ✅ 폴더 동기화 프로그램 · 최종 프롬프트 템플릿

## 1) 역할(Role)
당신은 **Windows 11 환경의 파일 동기화 자동화 엔지니어**이자 **코드 품질 검증자**입니다.  
요구 조건을 분석해 **완전한 동작 스크립트(전체 소스)**와 **검증용 테스트 케이스**까지 제공합니다.

---

## 2) 목표(Goal)
- 두 개의 동일 구조 폴더 간에 **한쪽 폴더의 변경 파일만**을 **다른 폴더로 복사·덮어쓰기**합니다.
- 안전성(드라이런, 로그, 롤백 힌트)과 성능(감시/배치 선택)을 모두 충족합니다.

---

## 3) 대상(User / Env)
- 대상 사용자: **초중급 윈도우 사용자 / 개발자**
- OS: **Windows 11**
- 권장 구현 언어(선택 1):  
  ☐ PowerShell 7+ ☐ C#(.NET 8) ☐ Python 3.11+

---

## 4) 범위(Scope)
- **동기화 방향**: ☐ 단방향(Left ➜ Right) ☐ 단방향(Right ➜ Left) ☐ 양방향(충돌 규칙 필수)  
- **삭제 정책**: ☐ 미삭제(대상에만 추가/덮어쓰기) ☐ 삭제 반영(원본에 없는 파일은 대상에서 삭제)  
- **변경 판단 기준(우선순위)**:  
  1) 타임스탬프(LastWriteTime) 비교  
  2) 파일 크기 비교  
  3) (선택) 해시 비교: ☐ SHA-256 ☐ MD5  
- **필터링**: 포함 패턴(예: `*.cs;*.js`), 제외 패턴(예: `bin/*;obj/*;*.tmp`)  
- **파일 충돌 시 정책**: ☐ 최신 타임스탬프 우선 ☐ 해시 우선 ☐ 사용자 지정 규칙(설명)

---

## 5) 내용(Requirements)
- 입력 경로:
  - Left(원본 후보): `<예: C:\Source\Proj>`
  - Right(대상 후보): `<예: C:\Dest\Proj>`
- 동작 모드: ☐ 일회성 배치 ☐ 실시간 감시(FileSystemWatcher/USN 등)  
- 안전 장치: ☐ 드라이런(WhatIf) ☐ 충돌/오류 상세 로그 ☐ 작업 요약 리포트(JSON/CSV)  
- 성능: ☐ 병렬 복사(스레드/Task) ☐ 대용량 파일 스트리밍 ☐ 재시도/지수 백오프  
- 예외 처리: 경로 길이, 잠긴 파일, 권한 부족, 특수 문자, 심볼릭 링크/정규화

---

## 6) 절차(Procedure)
1. **사전 검증**: 경로 존재/권한/공간 체크 → 설정 유효성 결과 출력  
2. **스캔 단계**: 양쪽(또는 단방향 대상) 파일 목록 수집 → 변경 집합 계산  
3. **드라이런 리포트**: 복사/덮어쓰기/스킵/충돌/에러 예상 건수 요약  
4. **실행 단계**: 규칙에 따른 실제 복사/덮어쓰기/옵션 삭제 수행(진행률 표시)  
5. **로깅/요약**: 콘솔 요약 + 파일 로그(JSON/CSV) 저장(경로/소요시간/실패 리스트)  
6. **후검증**: 샘플 파일 N개 무작위 해시 대조, 총 파일 수/바이트 합 비교  
7. **종료 코드**: 0(성공)/1(부분 실패)/2(치명적 실패)

---

## 7) 검증(Verification)
- **샘플 테스트 케이스**(자동화 스크립트에 포함):
  - TC-01: 최신 타임스탬프 파일 덮어쓰기 동작
  - TC-02: 동일 타임스탬프·동일 크기·상이한 해시 파일 처리(해시 옵션 On/Off 비교)
  - TC-03: 제외 패턴이 적용되어 스킵되는 파일 검증
  - TC-04: 잠긴 파일/권한 오류 로그 기록 및 재시도 동작
  - TC-05: 드라이런과 실제 실행 결과 일치 테스트
- **성능 체크**: N개/초 처리량, 대용량(>500MB) 파일 처리 시간 측정

---

## 8) 출력(Output)
- **반드시 제공할 것**
  1) **전체 소스 코드(단일 파일 기준)** + **주요 함수 설명 주석**  
  2) **실행 커맨드 예시**(PowerShell/C#/Python 각각)  
  3) **설정 템플릿(JSON/YAML)** 예시(경로/필터/정책/해시/로그 옵션)  
  4) **샘플 로그 파일(JSON/CSV)** 예시 10행 내외  
  5) **README(간단)**: 설치, 실행, 옵션표, 오류 대응 FAQ

---

## 9) 추가(Extras)
- **트레이/서비스 모드**(선택): ☐ Windows 서비스 등록 스크립트 포함  
- **스케줄러 연동**: ☐ 작업 스케줄러 등록/해제 스크립트 포함  
- **복구 가이드**: 실수 삭제/덮어쓰기 대비 스냅샷/백업 권장사항 5줄  
- **보안**: 감사 로그(누가/언제/무엇을) 필드 포함

---

## 10) 내 입력값(이 프롬프트에 적용)
- 동기화 방향: **단방향(Left ➜ Right)**
- 삭제 정책: **미삭제**
- 변경 기준: **타임스탬프 ➜ 크기 ➜ (옵션) SHA-256**
- 필터: 포함 `*.*` / 제외 `bin/*;obj/*;*.log;*.tmp;.git/*`
- 모드: **일회성 배치** + 드라이런 지원
- 경로:
  - Left: `C:\staybymeerp-Intellij\`
  - Right: `C:\WORK\PROJECT\SBM\VSCODE\staybymeerp-Intellij\`
- 언어: **PowerShell 7+**
- 로그: **JSON + CSV** 동시 저장 (`C:\Logs\sync_{yyyyMMdd_HHmmss}.*`)
- 필요 산출물: **전체 소스 + 실행 예시 + 설정 템플릿 + 샘플 로그 + README**

---

## 11) 산출물 형식(Strict)
- 응답은 다음 순서로 단일 메시지에 제공합니다:
  1) `[README]`  
  2) `[config.example.json]`  
  3) `[config.example.yaml]`  
  4) `[sync.ps1]`  ← **전체 소스(단일 파일)**  
  5) `[run-examples.md]`  
  6) `[sample-log.json]` (10행 내외)  
  7) `[sample-log.csv]`  (10행 내외)
- 코드 블록은 파일별로 구분하고, **부분 소스 금지**. 실행 가능한 **완전본**만.

---

## 12) 품질 기준(QoS)
- 대용량 파일/경로 길이/권한 오류에 대한 **명시적 예외 처리**
- **경고/오류 메시지 한글 출력**
- **종료 코드 규약** 준수 및 문서화
- 설정 파일 누락 시 **친절한 기본값 + 안내**

---

## 13) 지금 수행할 작업
위 입력값을 반영하여 **요구 산출물 7종**을 생성하세요.  
추가 질문 없이 **합리적 가정**을 명시하고 즉시 결과를 제공합니다.
```
