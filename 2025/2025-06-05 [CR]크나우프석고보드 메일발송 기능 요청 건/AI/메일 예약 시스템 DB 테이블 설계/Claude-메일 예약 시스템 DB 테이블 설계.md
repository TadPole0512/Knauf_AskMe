# 아래는 특정 고객 담당자 및 담당 영업사원에게 D+1(익일착) 주문에 대하여 특정시간에 메일(내용+첨부파일(엑셀))을 전달하는 기능을 위한 DB 테이블 정보야.
아래의 내용을 검토해서 메일 예약 시스템 구축을 위한 DB 테이블 정보를 구성하는데 더 필요한 정보가 뭐가 있을까?

```diff
주문메일알람
  - 거래처코드, 담장자 이메일, 담당자 이메일 발송 여부, 영업 담당 이메일, 영업 담당 이메일 발송 여부, 비고, 생성자, 생성일, 수정자, 수정일

에약발송정보
  - 스케줄ID, 스케줄명, 스케줄시작일, 스케줄시각, 스케줄분, 사용여부, 비고, 생성자, 생성일, 수정자, 수정일

예약발송로그
  - 스케줄ID, 거래처 코드, 담당자 이메일, 발송여부, 발송시각, 발송 정보, 실패 코드, 실패 메시지, 생성자, 생성일
```
```
[개발환경]
- 운영체제 : 윈도우
- 개발툴 : STS4.5
- 자바 : Zulu-8
- WAS : Tomcat 9
- DB : mssql
- Maven
- MyBatis
- JQGrid
```

---------------------------------------------------------------------

현재 테이블 구성을 보니 기본적인 메일 예약 시스템 구축을 위한 핵심 요소들은 갖추고 있어. 하지만 실제 운영하면서 필요한 몇 가지 중요한 정보들이 빠져있네.

## 추가로 필요한 정보들

### 1. 메일 내용 관리 테이블
현재 구성에는 메일 본문과 제목을 어떻게 관리할지에 대한 정보가 없어.

**메일템플릿**
- 템플릿ID (PK)
- 템플릿명
- 메일제목
- 메일내용 (HTML/TEXT)
- 템플릿유형 (D+1주문, 일반알림 등)
- 사용여부
- 생성자, 생성일, 수정자, 수정일

### 2. 첨부파일 관리 정보
엑셀 첨부파일에 대한 정보가 없어.

**예약발송로그** 테이블에 추가 필요한 컬럼:
- 첨부파일명
- 첨부파일경로
- 첨부파일크기
- 파일생성여부 (Y/N)

### 3. 거래처 정보 보완
**주문메일알람** 테이블에 추가 필요한 컬럼:
- 거래처명 (코드만으로는 식별이 어려움)
- 담당자명
- 영업담당자명

### 4. 예약 발송 조건 정보
**예약발송정보** 테이블에 추가 필요한 컬럼:
- 반복유형 (매일, 평일만, 특정요일 등)
- 공휴일제외여부 (Y/N)
- 데이터존재시에만발송여부 (Y/N) - D+1 주문이 없으면 발송 안 함
- 템플릿ID (외래키)

### 5. 시스템 운영을 위한 추가 테이블

**메일발송설정**
- 설정ID (PK)
- SMTP서버
- 포트
- 발송자이메일
- 발송자명
- 인증여부
- 사용자명
- 비밀번호
- SSL사용여부
- 최대재시도횟수
- 재시도간격(분)

**공휴일관리**
- 날짜 (PK)
- 공휴일명
- 공휴일구분 (법정공휴일, 대체공휴일 등)

### 6. 데이터 타입 및 제약조건 정의

현재 컬럼들의 데이터 타입과 크기도 명확히 해야 해:

```sql
-- 예시: 주문메일알람 테이블
CREATE TABLE 주문메일알람 (
    거래처코드 VARCHAR(10) NOT NULL,
    거래처명 NVARCHAR(100),
    담당자이메일 VARCHAR(100),
    담당자명 NVARCHAR(50),
    담당자이메일발송여부 CHAR(1) DEFAULT 'Y',
    영업담당이메일 VARCHAR(100),
    영업담당자명 NVARCHAR(50),
    영업담당이메일발송여부 CHAR(1) DEFAULT 'Y',
    비고 NVARCHAR(500),
    생성자 VARCHAR(50),
    생성일 DATETIME DEFAULT GETDATE(),
    수정자 VARCHAR(50),
    수정일 DATETIME,
    PRIMARY KEY (거래처코드)
);
```

### 7. 추가 고려사항

**보안 관련:**
- 이메일 주소 암호화 여부
- 개인정보 접근 로그 관리

**성능 관련:**
- 예약발송로그 테이블의 파티셔닝 (월별 또는 분기별)
- 인덱스 설계

**모니터링 관련:**
- 발송 성공률 통계
- 시스템 상태 체크

이 정도면 D+1 주문 메일 예약 시스템을 안정적으로 운영할 수 있을 거야. 특히 템플릿 관리와 첨부파일 관리 부분은 꼭 추가하는 게 좋겠어.